METHOD_0 ( ) { when ( IDENT_0 . METHOD_1 ( METHOD_2 ( ) ) ) . thenReturn ( IDENT_1 ) ; when ( IDENT_1 . METHOD_3 ( ) ) . thenReturn ( IDENT_2 . IDENT_3 ) ; when ( IDENT_4 . METHOD_1 ( METHOD_2 ( ) ) ) . thenReturn ( IDENT_5 ) ; when ( IDENT_6 . METHOD_4 ( any ( com . cloud . model . IDENT_7 . IDENT_8 . class ) , METHOD_2 ( ) , METHOD_2 ( ) ) ) . thenReturn ( IDENT_9 ) ; when ( IDENT_9 . METHOD_5 ( ) ) . thenReturn ( STRING_0 ) ; when ( IDENT_5 . getName ( ) ) . thenReturn ( STRING_0 ) ; com . cloud . storage . IDENT_10 IDENT_11 = IDENT_12 . METHOD_6 ( com . cloud . storage . IDENT_11 . IDENT_13 . IDENT_14 , com . cloud . storage . IDENT_11 . IDENT_13 . IDENT_15 , com . cloud . storage . IDENT_11 . IDENT_13 . IDENT_16 , com . cloud . storage . IDENT_11 . IDENT_13 . IDENT_17 ) ; "<AssertPlaceHolder>" ; } METHOD_6 ( java . lang . Long , java . lang . Long , java . lang . Long , java . lang . Long ) { final com . cloud . IDENT_18 . IDENT_19 IDENT_18 = this . IDENT_0 . METHOD_1 ( IDENT_20 ) ; if ( IDENT_18 == null ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( STRING_1 + IDENT_20 ) + STRING_2 ) ) ; } if ( ! ( IDENT_2 . IDENT_3 . equals ( IDENT_18 . METHOD_3 ( ) ) ) ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( STRING_3 + ( IDENT_18 . METHOD_3 ( ) ) ) + STRING_4 ) ) ; } final com . cloud . IDENT_18 . IDENT_11 . IDENT_22 IDENT_23 = this . IDENT_4 . METHOD_1 ( IDENT_24 ) ; if ( IDENT_23 == null ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( STRING_2 4 + IDENT_24 ) + STRING_2 ) ) ; } final com . cloud . IDENT_21 . user . IDENT_25 IDENT_26 = com . cloud . context . IDENT_27 . METHOD_8 ( ) . METHOD_9 ( ) ; this . IDENT_28 . METHOD_10 ( IDENT_26 , null , true , IDENT_23 ) ; final com . cloud . storage . IDENT_29 IDENT_11 = this . IDENT_30 . METHOD_1 ( IDENT_31 ) ; if ( IDENT_11 == null ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( STRING_2 3 + IDENT_31 ) + STRING_2 ) ) ; } final com . cloud . engine . IDENT_32 . api . storage . IDENT_33 IDENT_34 = this . IDENT_35 . METHOD_11 ( IDENT_36 ) ; if ( IDENT_34 == null ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( STRING_5 + IDENT_36 ) + STRING_2 ) ) ; } if ( ( IDENT_34 . METHOD_12 ( ) ) != ( com . cloud . IDENT_21 . IDENT_18 . IDENT_37 . IDENT_38 . IDENT_39 ) ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( ( ( ( ( STRING_2 5 + IDENT_36 ) + STRING_6 ) + ( com . cloud . IDENT_21 . IDENT_18 . IDENT_37 . IDENT_38 . IDENT_39 ) ) + STRING_2 1 ) + ( IDENT_34 . METHOD_12 ( ) ) ) + STRING_2 2 ) ) ; } final com . cloud . engine . IDENT_32 . api . storage . IDENT_40 store = IDENT_34 . METHOD_13 ( ) ; final com . cloud . storage . datastore . db . IDENT_41 IDENT_42 = this . IDENT_6 . METHOD_4 ( store . METHOD_14 ( ) , store . getId ( ) , IDENT_36 ) ; if ( IDENT_42 != null ) { final com . cloud . storage . IDENT_29 IDENT_43 = this . IDENT_30 . METHOD_1 ( IDENT_42 . METHOD_15 ( ) ) ; if ( ( ( IDENT_43 != null ) && ( ( IDENT_42 . METHOD_5 ( ) ) != null ) ) && ( IDENT_42 . METHOD_5 ( ) . equals ( IDENT_23 . getName ( ) ) ) ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_7 ( ( ( STRING_7 + ( IDENT_43 . METHOD_16 ( ) ) ) + STRING_2 0 ) ) ; } } com . cloud . engine . IDENT_32 . api . storage . IDENT_44 IDENT_45 = this . IDENT_46 . METHOD_17 ( IDENT_31 , store ) ; IDENT_45 = ( ( com . cloud . engine . IDENT_32 . api . storage . IDENT_44 ) ( store . create ( IDENT_45 ) ) ) ; final com . cloud . storage . datastore . db . IDENT_41 IDENT_47 = this . IDENT_6 . METHOD_18 ( IDENT_11 . getId ( ) , store . METHOD_14 ( ) ) ; IDENT_47 . METHOD_19 ( IDENT_48 . IDENT_38 . IDENT_39 ) ; IDENT_47 . METHOD_20 ( IDENT_23 . getName ( ) ) ; this . IDENT_6 . update ( IDENT_47 . getId ( ) , IDENT_47 ) ; IDENT_11 . METHOD_19 ( IDENT_10 . IDENT_38 . IDENT_49 ) ; this . IDENT_30 . update ( IDENT_11 . getId ( ) , IDENT_11 ) ; IDENT_45 = this . IDENT_46 . METHOD_17 ( IDENT_31 , store ) ; final java . lang . Long IDENT_50 = IDENT_18 . METHOD_21 ( ) ; try { final com . cloud . engine . IDENT_32 . api . storage . IDENT_51 IDENT_52 = this . IDENT_53 . METHOD_22 ( IDENT_11 , IDENT_54 . IDENT_55 ) ; if ( IDENT_52 == null ) { throw new com . cloud . IDENT_21 . exceptions . METHOD_23 ( ( ( STRING_8 + IDENT_31 ) + STRING_9 ) ) ; } IDENT_45 = IDENT_52 . METHOD_24 ( IDENT_45 ) ; } catch ( final java . lang . Exception e ) { com . cloud . storage . IDENT_11 . IDENT_56 . IDENT_57 . debug ( STRING_10 , e ) ; this . IDENT_58 . METHOD_25 ( IDENT_50 , IDENT_59 . IDENT_11 ) ; this . IDENT_58 . METHOD_25 ( IDENT_50 , IDENT_59 . IDENT_60 , IDENT_34 . METHOD_26 ( ) ) ; throw new com . cloud . IDENT_21 . exceptions . METHOD_23 ( STRING_10 , e ) ; } return IDENT_45 ; }
org . junit . Assert . assertNull ( IDENT_11 ) 